(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6eb91502"],{"00b4":function(e,t,c){"use strict";c("ac1f");var n=c("23e7"),a=c("da84"),o=c("c65b"),i=c("e330"),r=c("1626"),s=c("861d"),l=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),d=a.Error,u=i(/./.test);n({target:"RegExp",proto:!0,forced:!l},{test:function(e){var t=this.exec;if(!r(t))return u(this,e);var c=o(t,this,e);if(null!==c&&!s(c))throw new d("RegExp exec method returned something other than an Object or null");return!!c}})},"07a1":function(e,t,c){},"1dde":function(e,t,c){var n=c("d039"),a=c("b622"),o=c("2d00"),i=a("species");e.exports=function(e){return o>=51||!n((function(){var t=[],c=t.constructor={};return c[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},8080:function(e,t,c){e.exports=c.p+"img/loading-spinner.52d49b58.gif"},8418:function(e,t,c){"use strict";var n=c("a04b"),a=c("9bf2"),o=c("5c6c");e.exports=function(e,t,c){var i=n(t);i in e?a.f(e,i,o(0,c)):e[i]=c}},"99af":function(e,t,c){"use strict";var n=c("23e7"),a=c("da84"),o=c("d039"),i=c("e8b5"),r=c("861d"),s=c("7b0b"),l=c("07fa"),d=c("8418"),u=c("65f0"),b=c("1dde"),m=c("b622"),p=c("2d00"),f=m("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",j=a.TypeError,O=p>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),v=b("concat"),y=function(e){if(!r(e))return!1;var t=e[f];return void 0!==t?!!t:i(e)},V=!O||!v;n({target:"Array",proto:!0,forced:V},{concat:function(e){var t,c,n,a,o,i=s(this),r=u(i,0),b=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?i:arguments[t],y(o)){if(a=l(o),b+a>h)throw j(g);for(c=0;c<a;c++,b++)c in o&&d(r,b,o[c])}else{if(b>=h)throw j(g);d(r,b++,o)}return r.length=b,r}})},c94a:function(e,t,c){"use strict";c("07a1")},fcf2:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a=c("8080"),o=c.n(a),i={class:"container"},r=Object(n["createElementVNode"])("img",{src:o.a,alt:"VueLoadingSpinner"},null,-1),s={class:"row justify-content-center text-secondary"},l={class:"col-md-8"},d=Object(n["createElementVNode"])("h2",{class:"text-center border-bottom pt-12 pb-8 mb-8"},"購物車",-1),u={key:0,class:"card bg-light p-28 my-10"},b=Object(n["createElementVNode"])("h5",{class:"text-center mb-4 py-4"},"購物車內尚未添加商品",-1),m={class:"btn btn-info fw-light rounded-pill mx-auto w-md-25 px-8 py-1 fs-6"},p=Object(n["createTextVNode"])("再去逛逛吧"),f={class:"row g-0"},h={class:"col-6 col-md-4"},g=["src","alt"],j={class:"col-6 col-md-8"},O={class:"card-body d-flex flex-column justify-content-between h-100 pb-2 pb-md-4"},v={class:"title d-flex justify-content-between"},y={class:"card-title fs-5 fs-md-4"},V=["disabled","onClick"],E=Object(n["createElementVNode"])("i",{class:"bi bi-x-circle fs-4"},null,-1),N=[E],x={class:"price d-flex justify-content-md-between flex-column flex-md-row"},w={class:"input-group product-num-group bg-light mt-1 mb-4 my-md-0"},k={class:"input-group-prepend"},C=["disabled","onClick"],D=Object(n["createElementVNode"])("i",{class:"bi bi-dash-lg"},null,-1),L=[D],I=["onUpdate:modelValue","onChange"],B={class:"input-group-append"},S=["disabled","onClick"],$=Object(n["createElementVNode"])("i",{class:"bi bi-plus-lg"},null,-1),q=[$],T={class:"card-text text-danger fs-4 fs-md-3 d-flex"},_={class:"text-danger me-4"},U=Object(n["createElementVNode"])("hr",{class:"my-6 mb-28"},null,-1),M={key:0,class:"row justify-content-center"},J={class:"col-md-8"},P={class:"card rounded-3 px-6 pb-6 mb-24"},R={class:"card-body"},z=Object(n["createElementVNode"])("h3",{class:"pt-4 mb-9"},"結帳",-1),A={class:"list-unstyled mb-12"},F={class:"d-flex justify-content-between mb-5"},G=Object(n["createTextVNode"])(" 總額"),H={class:"d-flex justify-content-between mb-5"},K=Object(n["createTextVNode"])(" 折扣"),Q={class:"mb-5"},W=Object(n["createElementVNode"])("p",{class:"text-info fw-light"},"使用優惠碼",-1),X={class:"input-group mb-3"},Y=["disabled"],Z={class:"d-flex justify-content-between fw-bold border-top border-bottom py-6"},ee=Object(n["createElementVNode"])("span",{class:"fs-6"},"結帳金額",-1),te={class:"fs-4 text-danger"},ce={class:"d-flex justify-content-end"},ne=["disabled"],ae=Object(n["createElementVNode"])("i",{class:"bi bi-arrow-right-circle fw-bold me-1 fs-5"},null,-1),oe=Object(n["createTextVNode"])(" 前往結帳 "),ie=[ae,oe];function re(e,t,c,a,o,E){var D,$,ae=this,oe=Object(n["resolveComponent"])("VueLoading"),re=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",i,[Object(n["createVNode"])(oe,{active:o.isLoading},{default:Object(n["withCtx"])((function(){return[r]})),_:1},8,["active"]),Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",l,[d,0===(null===(D=o.cartData.carts)||void 0===D?void 0:D.length)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",u,[b,Object(n["createElementVNode"])("button",m,[Object(n["createVNode"])(re,{to:"/products",class:"text-decoration-none text-light"},{default:Object(n["withCtx"])((function(){return[p]})),_:1})])])):(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],{key:1},Object(n["renderList"])(o.cartData.carts,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"card rounded-2 mb-6",key:e.id},[Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("img",{src:e.product.imageUrl,class:"img-fluid rounded-start w-100 object-fit-cover",alt:e.product.title},null,8,g)]),Object(n["createElementVNode"])("div",j,[Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("div",v,[Object(n["createElementVNode"])("h5",y,Object(n["toDisplayString"])(e.product.title),1),Object(n["createElementVNode"])("button",{class:"btn",disabled:ae.isLoadingItem===e.id,onClick:function(t){return E.deleteSingleProductItem(e.id)}},N,8,V)]),Object(n["createElementVNode"])("div",x,[Object(n["createElementVNode"])("div",w,[Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("button",{disabled:e.qty<=1||o.isLoadingItem===e.id,onClick:function(t){return E.editCartItem(e,e.qty--)},class:"btn border-0",type:"button",id:"button-addon1"},L,8,C)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"number",class:"form-control border-0 text-center my-auto shadow-none bg-light border","aria-describedby":"button-addon1","onUpdate:modelValue":function(t){return e.qty=t},disabled:"",onChange:function(t){return E.validateNumber(e)}},null,40,I),[[n["vModelText"],e.qty,void 0,{lazy:!0}]]),Object(n["createElementVNode"])("div",B,[Object(n["createElementVNode"])("button",{disabled:o.isLoadingItem===e.id,onClick:function(t){return E.editCartItem(e,e.qty++)},class:"btn border-0",type:"button",id:"button-addon2"},q,8,S)])]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("p",T,[Object(n["createElementVNode"])("span",_," $ "+Object(n["toDisplayString"])(parseInt(e.total)),1)])])])])])])])})),128)),U]),o.cartData.final_total||o.cartData.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",M,[Object(n["createElementVNode"])("div",J,[Object(n["createElementVNode"])("div",P,[Object(n["createElementVNode"])("div",R,[z,Object(n["createElementVNode"])("ul",A,[Object(n["createElementVNode"])("li",F,[G,Object(n["createElementVNode"])("span",null,"$ "+Object(n["toDisplayString"])(parseInt(o.cartData.total)),1)]),Object(n["createElementVNode"])("li",H,[K,Object(n["createElementVNode"])("span",null,"- $ "+Object(n["toDisplayString"])(parseInt(o.cartData.total)-parseInt(o.cartData.final_total)),1)]),Object(n["createElementVNode"])("li",Q,[W,Object(n["createElementVNode"])("div",X,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:"form-control","aria-describedby":"button-addon2","onUpdate:modelValue":t[0]||(t[0]=function(e){return o.code=e})},null,512),[[n["vModelText"],o.code]]),Object(n["createElementVNode"])("button",{class:"btn btn-primary text-light",type:"button",id:"button-addon2",disabled:o.codeStatus,onClick:t[1]||(t[1]=function(){return E.useCode&&E.useCode.apply(E,arguments)})}," 套用優惠券 ",8,Y)])]),Object(n["createElementVNode"])("li",Z,[ee,Object(n["createElementVNode"])("span",te,"$ "+Object(n["toDisplayString"])(parseInt(o.cartData.final_total)),1)])]),Object(n["createElementVNode"])("div",ce,[Object(n["createElementVNode"])("button",{onClick:t[2]||(t[2]=function(){return E.checkout&&E.checkout.apply(E,arguments)}),class:"btn btn-info rounded-pill text-light fw-light px-9 py-2 fs-6",disabled:0===(null===($=o.cartData.carts)||void 0===$?void 0:$.length)},ie,8,ne)])])])])])):Object(n["createCommentVNode"])("",!0)])])}c("99af"),c("ac1f"),c("00b4");var se={data:function(){return{isLoading:!1,cartData:[],productData:[],isLoadingItem:"",qty:1,code:"hoholiving2022",codeStatus:!1}},inject:["emitter"],methods:{getCartData:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("karen666","/cart");this.$http.get(t).then((function(t){e.cartData=t.data.data,e.isLoading=!1})).catch((function(e){console.log(e)}))},validateNumber:function(e){var t=/^\+?[1-9][0-9]*$/;t.test(e.qty)||(this.getCartData(),this.emitter.emit("push-message",{style:"danger",title:"請輸入 1 以上的整數"}))},editCartItem:function(e,t){var c=this;this.isLoading=!0;var n="".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("karen666","/cart/").concat(e.id);this.isLoadingItem=e.id;var a={data:{product_id:e.product_id,qty:e.qty}};this.$http.put(n,a).then((function(e){c.isLoading=!1,c.emitter.emit("push-message",{style:"success",title:"".concat(e.data.message)}),c.isLoadingItem="",c.getCartData()})).catch((function(e){console.log(e)}))},deleteSingleProductItem:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/v2/api/").concat("karen666","/cart/").concat(e);this.isLoadingItem=e,this.$http.delete(c).then((function(e){t.isLoading=!1,t.emitter.emit("get-cart-data"),t.emitter.emit("push-message",{style:"danger",title:"商品已刪除"}),t.isLoadingItem="",t.getCartData()})).catch((function(e){console.log(e),t.emitter.emit("push-message",{style:"danger",title:"商品未刪除，相關問題請洽服務人員！"})}))},useCode:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("karen666","/coupon"),c={code:this.code};this.$http.post(t,{data:c}).then((function(t){e.isLoading=!1,!1===t.data.success?e.emitter.emit("push-message",{style:"danger",title:"".concat(t.data.message)}):(e.emitter.emit("push-message",{style:"success",title:"已成功套用優惠券"}),e.getCartData())})).catch((function(t){console.log(t),e.emitter.emit("push-message",{style:"danger",title:"套用優惠券失敗，請電洽服務人員！"})}))},checkout:function(){this.$router.push("/order")}},mounted:function(){this.getCartData()}},le=(c("c94a"),c("6b0d")),de=c.n(le);const ue=de()(se,[["render",re]]);t["default"]=ue}}]);
//# sourceMappingURL=chunk-6eb91502.ec9d6f9c.js.map